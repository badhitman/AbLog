@using RazorLib.Shared.hardwares
@using Newtonsoft.Json;
@using MudBlazor;
@using SharedLib;

@inject ISnackbar _snackbar

<input type="checkbox" @bind="IsChecked" class="form-check-input" />

@code {
    [Parameter, EditorRequired]
    public string InputName { get; set; } = default!;

    [Parameter, EditorRequired]
    public string? InputValue { get; set; } = default!;

    [Parameter, EditorRequired]
    public bool IsChecked
    {
        set
        {
            SetValueHandler((value ? InputValue : null), InputName);
        }
        get
        {
            return FormContext?.DataContext.ContainsKey(InputName) == true;
        }
    }

    [Parameter, EditorRequired]
    public Action<object?, string?> SetValueHandler { get; set; } = default!;

    [CascadingParameter]
    public FormContextModel? FormContext { get; set; }
}
