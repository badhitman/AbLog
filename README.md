# AbLog

### предыдущие версии
Данное решение это третья версия подобного решения моего авторства

## Введение
Клиент-серверный вариант приложения для доступа к контроллерам умного дома [ab-log](https://ab-log.ru/) через MQTT сервер. Если быть точным, то это комплект из двух приложений (+ доступ через TelegramBot):
- *Серверная часть* **ASP NET6**. Поддерживаемые платформы: Linux, Windows, Mac. Серверная часть имеет полноценный WEB интерфейс и впринципе использование клиента не обязательно.
- *Доступ к серверу через TelegramBot*. Доступ не полноценный если сравнивать с клиентами, но в то же время удалённый доступ к серверным настройкам MQTT возможен только через него. Конечно же MQTT настройки можно настроить через WEB, но для удалённого редактиирования этих настроек пригоден только Telegram. Удалённый клиент не имеет доступ к эим настройкам.
- *Удалённый клиент* **.NET MAUIBlazor Hybrid** через промежуточный MQTT (в т.ч. бесплатный сервис [hivemq.cloud](https://console.hivemq.cloud/)). Поддерживаемые платформы: Windows, Android. Полноценный клиент, который ни чем не уступает локальному/серверному клиенту. Если быть точным, то это буквально один и тот же код Blazor с той лишь разницей, что серверный web клиент общается с сервером посредствам REST/API, а удалённый клиент делает то же самое через промежуточный MQTT сервер. Единственное ограничение в том, что удалённые клиенты не имеют возможности редактировать серверные настройки MQTT (для этого пригоден TelegramBot доступ)

## Настройка сервера
...

### MQTT conf
...

### Email conf
...

### TelegramBot conf
...

## Настройка клиента
...

### Email conf
...

### TelegramBot conf
...

## Доступ к контроллерам AB Log
...

### Добавление устройства
...

### Ретранслятор
...

### Ручной доступ к портам
...

### Доступ к USB камерам сервера
...

## Вопросы и ответы
### Конфидициальность/Безопасность
Использование шифрования трафика MQTT парольной фразой обеспечит достаточную анонимнось что бы ни кто не мог увидеть данные, которые ходят между серверной частью и удалённым клиентом. В то же время: серверная часть так же как и удалённый клиент Все данные открыто хранят в своей локлаьной БД. Если злоумышленник получит доступ локальному диску сервера или клиента - он получит доступ в том числе и к логинам/паролям MQTT, что позволит получить полный доступ к данному программному решению. Следует иметь ввиду, что удалённый клиент хранит у себя только настройки MQTT, а всё остальное для него проходит в режиме онлайн через MQTT транспорт.

### Управление правами доступа
Уровни прав регулируются только для TelegramBot доступа. Для него можно отдельно разрешить разные области доступа. Что касается доступ через удалённый клиент, то разграничений по правам нет. Вы можете добавлять/удалять пользователей средствами управления акаунтами MQTT. Технически вы можете везде использовать один

### База данных
В качестве СУБД используется SQLite. Это касается как удалённого клиента так и сервера. В то же время: удалённый клиент хранит у себя только настройки подключения к MQTT, а остальные настройки хранятся в БД серверной части.

### Особенности и ограничения использования бесплатного MQTT hivemq.cloud
...


### Изоляция нескольких контуров в рамках одного сервера MQTT (префиксы топиков)
Если у вас один единственный сервер MQTT, то по умолчанию все клиенты и сервер вместе с ними находятся в одном контуре. 
### 
### 